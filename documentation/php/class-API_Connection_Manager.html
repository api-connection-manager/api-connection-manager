<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.7.0" />

	<title>Class API_Connection_Manager</title>

	<script type="text/javascript" src="resources/combined.js?2398159053"></script>
	<script type="text/javascript" src="elementlist.js?3766833873"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?1567499433" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li><a href="package-api.connection.manager.html">api-connection-manager</a>
						</li>
				<li><a href="package-david.coombes.html">david-coombes</a>
						</li>
				<li class="active"><a href="package-None.html">None</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-API_Con_Mngr_Log.html">API_Con_Mngr_Log</a></li>
				<li class="active"><a href="class-API_Connection_Manager.html">API_Connection_Manager</a></li>
				<li><a href="class-OAuthConsumer.html">OAuthConsumer</a></li>
				<li><a href="class-OAuthDataStore.html">OAuthDataStore</a></li>
				<li><a href="class-OAuthRequest.html">OAuthRequest</a></li>
				<li><a href="class-OAuthServer.html">OAuthServer</a></li>
				<li><a href="class-OAuthSignatureMethod.html">OAuthSignatureMethod</a></li>
				<li><a href="class-OAuthSignatureMethod_HMAC_SHA1.html">OAuthSignatureMethod_HMAC_SHA1</a></li>
				<li><a href="class-OAuthSignatureMethod_PLAINTEXT.html">OAuthSignatureMethod_PLAINTEXT</a></li>
				<li><a href="class-OAuthSignatureMethod_RSA_SHA1.html">OAuthSignatureMethod_RSA_SHA1</a></li>
				<li><a href="class-OAuthToken.html">OAuthToken</a></li>
				<li><a href="class-OAuthUtil.html">OAuthUtil</a></li>
			</ul>



			<h3>Exceptions</h3>
			<ul>
				<li><a href="class-OAuthException.html">OAuthException</a></li>
			</ul>


		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-None.html" title="Summary of None"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
			<li>
				<a href="todo.html" title="Todo list"><span>Todo</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class API_Connection_Manager</h1>











	<div class="info">
		
		
		
		

		<b>Located at</b> <a href="source-class-API_Connection_Manager.html#65" title="Go to source code">class-api-connection-manager.php</a><br />
	</div>


	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-API_Connection_Manager.html#84" title="Go to source code">__construct</a>( )</code>

		<div class="description short">
			
<p>Loads settings and set default params.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Loads settings and set default params.</p>






				<h4>See</h4>
				<div class="list">
						index.php for dependencies idea of code flow.<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="connect" id="_connect">

		<td class="attributes"><code>
			 public 
			true|WP_Error
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_connect">#</a>
		<code><a href="source-class-API_Connection_Manager.html#132" title="Go to source code">connect</a>( <span>string <var>$slug</var></span>, <span>boolean <var>$die</var> = <span class="php-keyword1">true</span></span> )</code>

		<div class="description short">
			
<p>Connects to a service.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Connects to a service.</p>

<p>First checks if user is logged in, if not then returns a WP_Error object with
the service login link as the error message. If service is logged in will return
the service data.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code></dd>
					<dt><var>$die</var></dt>
					<dd><code>boolean</code><br> Default true. Whether to die with login link or return a WP_Error object if
service is not connected</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>true|WP_Error</code><br />
				</div>


				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::get_service_states()</a></code></code><br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::get_service_states()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="delete_token" id="_delete_token">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_delete_token">#</a>
		<code><a href="source-class-API_Connection_Manager.html#207" title="Go to source code">delete_token</a>( <span>string <var>$slug</var></span>, <span>enum <var>$type</var> = <span class="php-quote">'all'</span></span> )</code>

		<div class="description short">
			
<p>Delete tokens for a service. Unless specified will delete both refresh and
access token.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Delete tokens for a service. Unless specified will delete both refresh and
access token.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service slug</dd>
					<dt><var>$type</var></dt>
					<dd><code>enum</code><br> all|access|refresh The type of token to delete. Defaults to 'all'</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="get_service_states" id="_get_service_states">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_service_states">#</a>
		<code><a href="source-class-API_Connection_Manager.html#265" title="Go to source code">get_service_states</a>( <span>string <var>$type</var> = <span class="php-quote">'active'</span></span> )</code>

		<div class="description short">
			
<p>Return a list of connected services.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return a list of connected services.</p>

<p>Returns an array of service connect states. If a service is connected with
the currently logged in user then it will return $slug=&gt;array if the service
is not connected then it will return $slug=&gt;WP_Error. You can access the
service login link by then calling: $slug=&gt;WP_Error::get_error_message()</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$type</var></dt>
					<dd><code>string</code><br> Default 'active'. Whether to check active or inactive services.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>


				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::connect()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="get_current_user" id="_get_current_user">

		<td class="attributes"><code>
			 public 
			WP_User
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_current_user">#</a>
		<code><a href="source-class-API_Connection_Manager.html#289" title="Go to source code">get_current_user</a>( )</code>

		<div class="description short">
			
<p>Get the current user the api class is working off.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user the api class is working off.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>WP_User</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_logout_button" id="_get_logout_button">

		<td class="attributes"><code>
			 public 
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_logout_button">#</a>
		<code><a href="source-class-API_Connection_Manager.html#367" title="Go to source code">get_logout_button</a>( <span>string <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Get the login out link for a servie.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the login out link for a servie.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service slug.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br />
				</div>


				<h4>Todo</h4>
				<div class="list">
						finish the logout params in the module index.php file<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="get_service" id="_get_service">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_service">#</a>
		<code><a href="source-class-API_Connection_Manager.html#402" title="Go to source code">get_service</a>( <span>string <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Returns the details for a service.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the details for a service.</p>

<p>Returns module details, service params and service options.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service index_file</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_services" id="_get_services">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_services">#</a>
		<code><a href="source-class-API_Connection_Manager.html#435" title="Go to source code">get_services</a>( <span>string <var>$type</var> = <span class="php-quote">'active'</span> </span> )</code>

		<div class="description short">
			
<p>Returns a list of services.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns a list of services.</p>

<p>This is the main method for plugins to get services from.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$type</var></dt>
					<dd><code>string</code><br> The type of services active|inactive Default active.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>


				<h4>Todo</h4>
				<div class="list">
						change default to active.<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="log" id="_log">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_log">#</a>
		<code><a href="source-class-API_Connection_Manager.html#449" title="Go to source code">log</a>( <span>string <var>$msg</var></span> )</code>

		<div class="description short">
			
<p>Log a message</p>

		</div>

		<div class="description detailed hidden">
			
<p>Log a message</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$msg</var></dt>
					<dd><code>string</code><br> The message to log</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>Returns num of bytes written if success or FALSE if fail.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_check_modules_dir" id="__check_modules_dir">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__check_modules_dir">#</a>
		<code><a href="source-class-API_Connection_Manager.html#555" title="Go to source code">_check_modules_dir</a>( )</code>

		<div class="description short">
			
<p>Check if sub-modules directory exists.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Check if sub-modules directory exists.</p>

<p>If the directory doesn't exist tries to create it using the wordpress
Filesystem_API class. As the ftp login will be displayed this method should be
called from the dashboard/network admin settings page.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code>Exception</code><br>If the sub-modules directory can't be created.<br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="_print_login" id="__print_login">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__print_login">#</a>
		<code><a href="source-class-API_Connection_Manager.html#597" title="Go to source code">_print_login</a>( <span>string <var>$slug</var></span>, <span>boolean <var>$die</var> = <span class="php-keyword1">true</span></span> )</code>

		<div class="description short">
			
<p>Prints a login link for a service to the screen and dies</p>

		</div>

		<div class="description detailed hidden">
			
<p>Prints a login link for a service to the screen and dies</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service slug</dd>
					<dt><var>$die</var></dt>
					<dd><code>boolean</code><br> Default true. Return the login link or die()</dd>
				</dl></div>



				<h4>Todo</h4>
				<div class="list">
						remove this method. Been moved to API_Con_Mngr_Module<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_error" id="__error">

		<td class="attributes"><code>
			 private 
			WP_Error
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__error">#</a>
		<code><a href="source-class-API_Connection_Manager.html#618" title="Go to source code">_error</a>( <span>string <var>$msg</var></span> )</code>

		<div class="description short">
			
<p>Returns a WP_Error object.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns a WP_Error object.</p>

<p>Sets the error code to 'API Connection Manager' and returns a constructed
WP_Error object. Sets the last_error param to error message.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$msg</var></dt>
					<dd><code>string</code><br> The error message</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>WP_Error</code><br />
				</div>


				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#$last_error">API_Connection_Manager::<var>$last_error</var></a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_current_url" id="__get_current_url">

		<td class="attributes"><code>
			 private 
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_current_url">#</a>
		<code><a href="source-class-API_Connection_Manager.html#639" title="Go to source code">_get_current_url</a>( )</code>

		<div class="description short">
			
<p>Get the current url including scheme, host and query args</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current url including scheme, host and query args</p>




				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_get_current_user" id="__get_current_user">

		<td class="attributes"><code>
			 public 
			WP_User
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_current_user">#</a>
		<code><a href="source-class-API_Connection_Manager.html#651" title="Go to source code">_get_current_user</a>( )</code>

		<div class="description short">
			
<p>Get current user.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get current user.</p>

<p>Get this as early as possible for some calls when using admin ajax.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>WP_User</code><br>if no user then returns WP_User(0) else will return current users WP_User
object.<br />
				</div>


				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-API_Con_Mngr_Module.html#$user">API_Con_Mngr_Module::<var>$user</var></a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_installed_services" id="__get_installed_services">

		<td class="attributes"><code>
			 private 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_installed_services">#</a>
		<code><a href="source-class-API_Connection_Manager.html#669" title="Go to source code">_get_installed_services</a>( )</code>

		<div class="description short">
			
<p>Builds an array of all installed services and their params.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Builds an array of all installed services and their params.</p>

<p>The return array is split into active and inactive services. There are a lot
of system calls and working with files. Overuse of this method would not be
advised.</p>

<p>N.B. if a module requires session and it is not enabled then that module will
always be set as inactive.</p>

<p>Currently this method is used in: - API_Connection_Manager::__construct() -
API_Connection_Manager::get_services //only if no services loaded yet</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>


				<h4>Todo</h4>
				<div class="list">
						add error message is sessions disabled and module needs it<br />
						use API_Con_Mngr_Module for all services<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_options" id="__get_options">

		<td class="attributes"><code>
			 private 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_options">#</a>
		<code><a href="source-class-API_Connection_Manager.html#813" title="Go to source code">_get_options</a>( )</code>

		<div class="description short">
			
<p>Get options.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get options.</p>

<p>If multisite install will take options from get_site_option() if not then
defaults to get_option()</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>


				<h4>Todo</h4>
				<div class="list">
						this method is being called too much<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_options_transient" id="__get_options_transient">

		<td class="attributes"><code>
			 private 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_options_transient">#</a>
		<code><a href="source-class-API_Connection_Manager.html#834" title="Go to source code">_get_options_transient</a>( <span>string <var>$key</var> = <span class="php-quote">''</span> </span> )</code>

		<div class="description short">
			
<p>Returns transient options.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns transient options.</p>

<p>If mutlisite then will use get_site_transient() if not will default to
get_transient()</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$key</var></dt>
					<dd><code>string</code><br> The option key.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_get_module" id="__get_module">

		<td class="attributes"><code>
			 private 
			array|WP_Error
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_module">#</a>
		<code><a href="source-class-API_Connection_Manager.html#853" title="Go to source code">_get_module</a>( <span>string <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Loads a services module file (index.php) into the current namespace and
returns the params for a service.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Loads a services module file (index.php) into the current namespace and
returns the params for a service.</p>

<p>Sets the grant parameters here in order to build the grant uri but does not
set the token parameters. For this see:</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The sevice slug</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array|WP_Error</code><br>Returns error if file can't be loaded or options for service aren't set.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						API_Connection_Manager::_service_oauth2_login() If there is an error including
the file a WP_Error is returned. Returns params on success.<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_user_options" id="__get_user_options">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_user_options">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1010" title="Go to source code">_get_user_options</a>( )</code>

		<div class="description short">
			
<p>Gets the refresh states.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Gets the refresh states.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>An array of states.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::_set_refresh_state()</a></code></code><br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						get_user_user_meta()<br />
				</div>
				<h4>Todo</h4>
				<div class="list">
						maybe method shoudl be renamed _get_refresh_states() ?<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_get_service_options" id="__get_service_options">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_service_options">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1028" title="Go to source code">_get_service_options</a>( <span>string <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Returns the options for a service.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the options for a service.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The services module's index file.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_get_token" id="__get_token">

		<td class="attributes"><code>
			 public 
			string|WP_Error
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__get_token">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1043" title="Go to source code">_get_token</a>( <span>string <var>$slug</var></span>, <span>string <var>$type</var> = <span class="php-quote">'access'</span> </span> )</code>

		<div class="description short">
			
<p>Returns the access_token for the current user for a service.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the access_token for the current user for a service.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service slug</dd>
					<dt><var>$type</var></dt>
					<dd><code>string</code><br> Default access. Whether to return refresh or access tokens.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string|WP_Error</code><br>Returns the token or WP_Error if none found.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_module_activate" id="__module_activate">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__module_activate">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1073" title="Go to source code">_module_activate</a>( <span>string|array <var>$slugs</var></span> )</code>

		<div class="description short">
			
<p>Activate modules.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Activate modules.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slugs</var></dt>
					<dd><code>string|array</code><br> A string or array of slugs.</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_module_deactivate" id="__module_deactivate">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__module_deactivate">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1117" title="Go to source code">_module_deactivate</a>( <span>string|array <var>$slugs</var></span> )</code>

		<div class="description short">
			
<p>Deactivate modules.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Deactivate modules.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slugs</var></dt>
					<dd><code>string|array</code><br> A string or array of slugs.</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_response_listener" id="__response_listener">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__response_listener">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1161" title="Go to source code">_response_listener</a>( )</code>

		<div class="description short">
			
<p>Ajax callback</p>

		</div>

		<div class="description detailed hidden">
			
<p>Ajax callback</p>

<p>Bootstraps all response's to the api connection manager. Both secure and
non-secure response are parsed here (wp_ajax &amp;&amp; wp_ajax_nopriv).</p>

<p>Called by hook 'plugins_loaded' to ensure all plugins dependant on the api
are loaded. This method needs to do its own checking for ajax calls.</p>






				<h4>Todo</h4>
				<div class="list">
						test security.<br />
						There maybe need to tell if a response was for a logged in user or not. ie if it
was wp_ajax or wp_ajax_nopriv. One idea would be to set a flag in the construct
if wp_ajax_nopriv_(this_func) was requested?<br />
						should be private?<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_set_refresh_state" id="__set_refresh_state">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__set_refresh_state">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1300" title="Go to source code">_set_refresh_state</a>( <span>array <var>$slugs</var></span> )</code>

		<div class="description short">
			
<p>Enable|Disable the use of a refresh token.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Enable|Disable the use of a refresh token.</p>

<p>Wordpress users can enable or disable the ability for oauth2 services to
store a refresh token.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slugs</var></dt>
					<dd><code>string|array</code><br> The service slug or an array of slugs. These should be in the format:
$slugs[$slug] = boolean</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_url_query_append" id="__url_query_append">

		<td class="attributes"><code>
			 private 
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__url_query_append">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1324" title="Go to source code">_url_query_append</a>( <span>string <var>$url</var></span>, <span>array <var>$vars</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			
<p>Append params to a url.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Append params to a url.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$url</var></dt>
					<dd><code>string</code><br> The full url including current params.</dd>
					<dt><var>$vars</var></dt>
					<dd><code>array</code><br> Associative array of param name=&gt;value pairs.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_service_do_callback" id="__service_do_callback">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__service_do_callback">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1344" title="Go to source code">_service_do_callback</a>( <span>string <var>$unique</var></span>, <span>stdClass <var>$dto</var></span> )</code>

		<div class="description short">
			
<p>Calls a callback, if one is set.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Calls a callback, if one is set.</p>

<p>Checks the state variable in a dto against callbacks stored to get the file
and function|class to call. The dto is passed to the callback.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$unique</var></dt>
					<dd><code>string</code><br> The state variable to test agains</dd>
					<dt><var>$dto</var></dt>
					<dd><code>stdClass</code><br> The dto response</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::_service_parse_dto()</a></code></code><br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_service_login_authorize" id="__service_login_authorize">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__service_login_authorize">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1390" title="Go to source code">_service_login_authorize</a>( <span><code><a href="class-API_Con_Mngr_Module.html">API_Con_Mngr_Module</a></code> <var>$module</var></span>, <span>stdClass <var>$dto</var></span> )</code>

		<div class="description short">
			
<p>Authorize login method.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Authorize login method.</p>

<p>Set sessions/callbacks and redirect to authorize url</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$module</var></dt>
					<dd><code><code><a href="class-API_Con_Mngr_Module.html">API_Con_Mngr_Module</a></code></code></dd>
					<dt><var>$dto</var></dt>
					<dd><code>stdClass</code></dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_service_logout" id="__service_logout">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__service_logout">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1450" title="Go to source code">_service_logout</a>( <span>string <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Makes request to cancel a token.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Makes request to cancel a token.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$slug</var></dt>
					<dd><code>string</code><br> The service slug</dd>
				</dl></div>



				<h4>Todo</h4>
				<div class="list">
						finish this.<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_service_get_error" id="__service_get_error">

		<td class="attributes"><code>
			 private 
			string|false
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__service_get_error">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1479" title="Go to source code">_service_get_error</a>( <span>mixed <var>$response</var></span> )</code>

		<div class="description short">
			
<p>Test if response is oauth2 error.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Test if response is oauth2 error.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$response</var></dt>
					<dd><code>mixed</code><br> The server response body.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string|false</code><br>Returns the error message if found, or false if no error.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_service_parse_dto" id="__service_parse_dto">

		<td class="attributes"><code>
			 private 
			stdClass|WP_error
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__service_parse_dto">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1643" title="Go to source code">_service_parse_dto</a>( <span>array <var>$response</var></span>, <span> <var>$slug</var></span> )</code>

		<div class="description short">
			
<p>Parses a http request and returns a stdClass dto.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Parses a http request and returns a stdClass dto.</p>

<p>The format of the returned DTO is:</p>

<p>$res = new stdClass(); $res-&gt;response = array(); //the $_REQUEST array
$res-&gt;slug = ""; $res-&gt;user = "";</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$response</var></dt>
					<dd><code>array</code><br> An array to parse. Generally a $_REQUEST</dd>
					<dt><var>$slug</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>stdClass|WP_error</code><br>Returns an error if no service slug found.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="_set_callback" id="__set_callback">

		<td class="attributes"><code>
			 public 
			type
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__set_callback">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1732" title="Go to source code">_set_callback</a>( <span><code><a href="class-API_Con_Mngr_Module.html">API_Con_Mngr_Module</a></code> <var>$module</var></span> )</code>

		<div class="description short">
			
<p>Sets the slug for module as a callback var</p>

		</div>

		<div class="description detailed hidden">
			
<p>Sets the slug for module as a callback var</p>

<p>For oauth2 the key in the callbacks array is the client_id.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$module</var></dt>
					<dd><code><code><a href="class-API_Con_Mngr_Module.html">API_Con_Mngr_Module</a></code></code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>type</code><br />
				</div>


				<h4>See</h4>
				<div class="list">
						API_Connection_Manager::do_callback()<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_set_option_transient" id="__set_option_transient">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__set_option_transient">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1750" title="Go to source code">_set_option_transient</a>( <span>string <var>$key</var> = <span class="php-quote">''</span></span>, <span>array <var>$options</var></span>, <span>integer <var>$expiration</var> = <span class="php-num">10</span></span> )</code>

		<div class="description short">
			
<p>Sets temporary options.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Sets temporary options.</p>

<p>Sets options that will expire in x amount of seconds such as callbacks for
login hooks.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$key</var></dt>
					<dd><code>string</code><br> Options identifiying string</dd>
					<dt><var>$options</var></dt>
					<dd><code>array</code><br> The options array</dd>
					<dt><var>$expiration</var></dt>
					<dd><code>integer</code><br> Time to expire. Default 10 seconds.</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_set_option" id="__set_option">

		<td class="attributes"><code>
			 private 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__set_option">#</a>
		<code><a href="source-class-API_Connection_Manager.html#1772" title="Go to source code">_set_option</a>( <span>array <var>$options</var></span> )</code>

		<div class="description short">
			
<p>Sets the API's options.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Sets the API's options.</p>

<p>If multisite install will set site options, if not then normal wp options.
Will update the services member with the new options.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$options</var></dt>
					<dd><code>array</code></dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	</table>







	<table class="summary" id="properties">
	<caption>Properties summary</caption>
	<tr data-order="last_error" id="$last_error">

		<td class="attributes"><code>
			public 
			string
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#67" title="Go to source code"><var>$last_error</var></a>
		</td>
		<td class="value"><code><span class="php-quote">&quot;&quot;</span></code></td>
		<td class="description"><div>
			<a href="#$last_error" class="anchor">#</a>

			<div class="description short">
				
<p>The last error made</p>

			</div>

			<div class="description detailed hidden">
				
<p>The last error made</p>


					<h4>Used by</h4>
					<div class="list">
							<code><code><a href="class-API_Connection_Manager.html#_">API_Connection_Manager::_error()</a></code></code> <br />
					</div>
			</div>
		</div></td>
	</tr>
	<tr data-order="redirect_uri" id="$redirect_uri">

		<td class="attributes"><code>
			public 
			string
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#69" title="Go to source code"><var>$redirect_uri</var></a>
		</td>
		<td class="value"><code><span class="php-quote">&quot;&quot;</span></code></td>
		<td class="description"><div>
			<a href="#$redirect_uri" class="anchor">#</a>

			<div class="description short">
				
<p>The redirect uri</p>

			</div>

			<div class="description detailed hidden">
				
<p>The redirect uri</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="services" id="$services">

		<td class="attributes"><code>
			public 
			array
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#71" title="Go to source code"><var>$services</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">array</span>()</code></td>
		<td class="description"><div>
			<a href="#$services" class="anchor">#</a>

			<div class="description short">
				
<p>List of all installed services</p>

			</div>

			<div class="description detailed hidden">
				
<p>List of all installed services</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="dir_sub" id="$dir_sub">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#73" title="Go to source code"><var>$dir_sub</var></a>
		</td>
		<td class="value"><code><span class="php-quote">&quot;&quot;</span></code></td>
		<td class="description"><div>
			<a href="#$dir_sub" class="anchor">#</a>

			<div class="description short">
				
<p>The location of the submodules dir</p>

			</div>

			<div class="description detailed hidden">
				
<p>The location of the submodules dir</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="option_name" id="$option_name">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#75" title="Go to source code"><var>$option_name</var></a>
		</td>
		<td class="value"><code><span class="php-quote">&quot;api-connection-manager&quot;</span></code></td>
		<td class="description"><div>
			<a href="#$option_name" class="anchor">#</a>

			<div class="description short">
				
<p>The name of the options var for this api</p>

			</div>

			<div class="description detailed hidden">
				
<p>The name of the options var for this api</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="url_sub" id="$url_sub">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#77" title="Go to source code"><var>$url_sub</var></a>
		</td>
		<td class="value"><code><span class="php-quote">&quot;&quot;</span></code></td>
		<td class="description"><div>
			<a href="#$url_sub" class="anchor">#</a>

			<div class="description short">
				
<p>The url to the submodules dir</p>

			</div>

			<div class="description detailed hidden">
				
<p>The url to the submodules dir</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="log_api" id="$log_api">

		<td class="attributes"><code>
			private 
			<code><a href="class-API_Con_Mngr_Log.html">API_Con_Mngr_Log</a></code>
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#79" title="Go to source code"><var>$log_api</var></a>
		</td>
		<td class="value"><code></code></td>
		<td class="description"><div>
			<a href="#$log_api" class="anchor">#</a>

			<div class="description short">
				
<p>The log class</p>

			</div>

			<div class="description detailed hidden">
				
<p>The log class</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="user" id="$user">

		<td class="attributes"><code>
			private 
			WP_User
		</code></td>

		<td class="name">
				<a href="source-class-API_Connection_Manager.html#81" title="Go to source code"><var>$user</var></a>
		</td>
		<td class="value"><code></code></td>
		<td class="description"><div>
			<a href="#$user" class="anchor">#</a>

			<div class="description short">
				
<p>The current user</p>

			</div>

			<div class="description detailed hidden">
				
<p>The current user</p>


			</div>
		</div></td>
	</tr>
	</table>



</div>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen 2.7.0</a>
	</div>
</div>
</div>
</body>
</html>
